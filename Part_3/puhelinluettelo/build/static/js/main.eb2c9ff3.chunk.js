(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),o=t(15),a=t.n(o),i=t(3),s=t(4),l=t.n(s),u="/api/persons",d={getAll:function(){return l.a.get(u)},create:function(e){return l.a.post(u,e)},deleteAddress:function(e){return l.a.delete("".concat(u,"/").concat(e))},update:function(e,n){return l.a.put("".concat(u,"/").concat(e),n)}},j=t(0),b=function(e){var n=e.onSubmitHandler,t=e.onNameChangeHandler,c=e.newName,r=e.onNumberChangeHandler,o=e.newNumber;return Object(j.jsxs)("form",{onSubmit:n,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{onChange:t,value:c})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{onChange:r,value:o})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"Add"})})]})},f=function(e){var n=e.name,t=e.number,c=e.id,o=e.setPersons,a=e.setNotification;return Object(j.jsx)(r.a.Fragment,{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:n}),Object(j.jsx)("td",{children:t}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(n,"?"))&&(d.deleteAddress(e).then((function(e){console.log(e,"delete address")})),a(["Deleted ".concat(n),"deleted"]),setTimeout((function(){a([null,null])}),5e3),d.getAll().then((function(e){o(e.data)})))}(c)},children:"Delete"})})]})})},m=function(e){var n,t=e.persons,c=e.filterName,r=e.setPersons,o=e.setNotification;if(void 0===t)return Object(j.jsx)("p",{children:"Loading..."});var a=t.filter((function(e){return e.name.includes(c)}));return n=a.length||c?a.map((function(e){return Object(j.jsx)(f,{setNotification:o,setPersons:r,id:e.id,name:e.name,number:e.number},e.name)})):t.map((function(e){return Object(j.jsx)(f,{setNotification:o,setPersons:r,id:e.id,name:e.name,number:e.number},e.name)})),Object(j.jsx)("table",{children:Object(j.jsx)("tbody",{children:n})})},h=function(e){var n=e.filterName,t=e.filterCHangeHandler;return Object(j.jsxs)("div",{children:["filter: ",Object(j.jsx)("input",{onChange:t,value:n})]})},O=t(5),x=t.n(O),g=function(e){var n=e.notification,t=Object(i.a)(n,2),c=t[0],r=t[1];return null===c?null:r?Object(j.jsx)("div",{className:"".concat(x.a.notification," ").concat(x.a.ok),children:c}):Object(j.jsx)("div",{className:"".concat(x.a.notification," ").concat(x.a.error),children:c})},p=(t(39),function(){var e=Object(c.useState)(void 0),n=Object(i.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)(""),s=Object(i.a)(a,2),l=s[0],u=s[1],f=Object(c.useState)(""),O=Object(i.a)(f,2),x=O[0],p=O[1],v=Object(c.useState)(""),N=Object(i.a)(v,2),w=N[0],C=N[1],H=Object(c.useState)([null,null]),A=Object(i.a)(H,2),S=A[0],_=A[1];return Object(c.useEffect)((function(){d.getAll().then((function(e){console.log(e),o(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(g,{notification:S}),Object(j.jsx)(h,{filterCHangeHandler:function(e){return C(e.target.value)},filterName:w}),Object(j.jsx)("h3",{children:"Add a new"}),Object(j.jsx)(b,{onSubmitHandler:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===l.trim()}));if(0===n.length){var c={name:l,number:x};d.create(c).then((function(e){o(t.concat(e.data)),_(["Added ".concat(c.name),"added"])})).catch((function(e){console.log("front end error err.response.data.error"),console.log(e.response.data.error),_(["".concat(e.response.data.error),null])}))}else{var r=window.confirm("".concat(l.trim()," is already added to phonebook, replace the old with a new one?")),a=n[0];if(r){var i={name:l.trim(),number:x};d.update(a.id,i).then((function(e){console.log(e.data),_(["Number was changed for ".concat(i.name),"changed"])})).catch((function(e){console.log(e),_(["Address ".concat(i.name," was already deleted from server"),null])}))}}setTimeout((function(){_([null,null])}),5e3),u(""),p("")},onNameChangeHandler:function(e){return u(e.target.value)},onNumberChangeHandler:function(e){return p(e.target.value)},newName:l,newNumber:x}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(m,{setNotification:_,filterName:w,persons:t,setPersons:o})]})});a.a.render(Object(j.jsx)(p,{}),document.getElementById("root"))},5:function(e,n,t){e.exports={notification:"Notification_notification__pERJa",error:"Notification_error__3R2sS",ok:"Notification_ok__23aTD"}}},[[40,1,2]]]);
//# sourceMappingURL=main.eb2c9ff3.chunk.js.map